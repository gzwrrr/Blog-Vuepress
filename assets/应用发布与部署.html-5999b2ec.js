import{_ as i,Q as a,S as l,a9 as n}from"./framework-d7e1aa10.js";const o={},e=n('<h1 id="应用发布与部署" tabindex="-1"><a class="header-anchor" href="#应用发布与部署" aria-hidden="true">#</a> 应用发布与部署</h1><div class="hint-container info"><p class="hint-container-title">说明</p><p>全量发布：</p><ol><li>蓝绿发布</li><li>红黑发布</li></ol><p>增量发布：灰度发布（金丝雀发布）</p></div><h2 id="蓝绿发布" tabindex="-1"><a class="header-anchor" href="#蓝绿发布" aria-hidden="true">#</a> 蓝绿发布</h2><figure><img src="https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//运维/20230725/蓝绿发布.png" alt="蓝绿发布" tabindex="0" loading="lazy"><figcaption>蓝绿发布</figcaption></figure><p>发布流程：</p><ol><li>断开集群A，升级新版本</li><li>当新版本完全启动后，接入新版本，同时下掉集群 B</li><li>断开集群 B，升级新版本</li><li>当新版本完全启动后，接入新版本</li></ol><h2 id="红黑发布" tabindex="-1"><a class="header-anchor" href="#红黑发布" aria-hidden="true">#</a> 红黑发布</h2><figure><img src="https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//运维/20230725/红黑发布.png" alt="红黑发布" tabindex="0" loading="lazy"><figcaption>红黑发布</figcaption></figure><p>红黑发布利用云服务的弹性伸缩，发布流程：</p><ol><li>启动一个新的集群 B，完成后连接到集群 B</li><li>断开集群 A，并释放集群 A 的所有资源</li></ol><h2 id="灰度发布" tabindex="-1"><a class="header-anchor" href="#灰度发布" aria-hidden="true">#</a> 灰度发布</h2><figure><img src="https://my-photos-1.oss-cn-hangzhou.aliyuncs.com/markdown//运维/20230725/灰度发布.png" alt="灰度发布" tabindex="0" loading="lazy"><figcaption>灰度发布</figcaption></figure><p>发布流程：</p><ol><li>启动新版本集群 B，将部分流量接入集群 B</li><li>如果新版本可以使用，继续加大集群 B 的流量</li><li>最终将全部流量切换到集群 B，并断开集群 A</li></ol><p>可能的挑战：</p><ol><li>新旧版本系统的 SQL 语句可能不一致，需要考虑兼容性</li><li>新旧版本无法协同作业，此时可以改用红黑发布</li><li>如果使用随机访问的负载均衡策略，可能出现同一个用户在新旧版本切换，大概率会出现 Bug</li><li>注意要进行链路追踪，统计新版本的请求数据</li></ol>',16),t=[e];function c(r,s){return a(),l("div",null,t)}const d=i(o,[["render",c],["__file","应用发布与部署.html.vue"]]);export{d as default};
