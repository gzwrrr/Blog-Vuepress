import{_ as l,Q as p,S as i,U as a,a8 as n,W as e,a9 as t,H as o}from"./framework-d7e1aa10.js";const r={},c=a("h1",{id:"服务网关-kong",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#服务网关-kong","aria-hidden":"true"},"#"),n(" 服务网关-Kong")],-1),u={href:"https://mockbin.org/",target:"_blank",rel:"noopener noreferrer"},d={href:"https://docs.konghq.com/gateway/3.2.x/get-started/services-and-routes/",target:"_blank",rel:"noopener noreferrer"},v={class:"hint-container info"},k=a("p",{class:"hint-container-title"},"相关文章",-1),m={href:"https://cloud.tencent.com/developer/article/1938873#:~:text=Kong%20%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84%201%20Kong%20%E4%BD%BF%E7%94%A8%20PostgreSQL%20%E6%88%96%20Cassandra,%E6%8F%90%E4%BE%9B%E4%BA%86%E6%8F%92%E4%BB%B6%E6%A8%A1%E5%9E%8B%EF%BC%8C%E4%BD%BF%E7%94%A8%20Lua%20%E8%84%9A%E6%9C%AC%E6%9D%A5%E5%AF%B9%20Nginx%20%E6%95%B4%E4%B8%AA%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%E3%80%82%20%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%EF%BC%88%20%E9%99%90%E6%B5%81%E3%80%81%E7%86%94%E6%96%AD%E3%80%81%E9%AA%8C%E6%9D%83%E7%AD%89%20%EF%BC%89%E3%80%82",target:"_blank",rel:"noopener noreferrer"},b={href:"https://zhuanlan.zhihu.com/p/421894560",target:"_blank",rel:"noopener noreferrer"},g={href:"https://zhuanlan.zhihu.com/p/109720608",target:"_blank",rel:"noopener noreferrer"},h={href:"https://zhuanlan.zhihu.com/p/268012199",target:"_blank",rel:"noopener noreferrer"},_=a("h2",{id:"简介",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#简介","aria-hidden":"true"},"#"),n(" 简介")],-1),f=a("figure",null,[a("img",{src:"https://ask.qcloudimg.com/http-save/yehe-2680217/b7da51903ec5a93effa2acb11046e95f.png?imageView2/2/w/2560/h/7000",alt:"img",tabindex:"0",loading:"lazy"}),a("figcaption",null,"img")],-1),E=a("blockquote",null,[a("p",null,"Kong 是由 Mashape 开源的一款具有高性能、高可用特点的云原生架构下的分布式 API 网关。基于 Nginx 和 OpenResty 的 Kong 获得了非常高的性能。Lua 脚本的插件系统架构设计也使得其具有高扩展性的能力后并不会丢失性能。"),a("p",null,"Kong = Nginx + Lua + OpenResty"),a("p",null,"契约式编程，由于无法像正常开发团队一样拥有那么多的机会沟通与交流。所以核心服务就会对外定义一些规范与接口，用于提供扩展能里。而开发者只需要按照规范进行遵守即可。这样保证了插件开发流程的简洁与高效。")],-1),A=a("p",null,"优势：",-1),q=t("<li><p>插件市场丰富，很多插件可以降低开发成本；</p></li><li><p>可扩展性，可以编写lua脚本来定制自己的参数验证权限验证等操作；</p></li><li><p>基于openResty，openResty基于Nginx保障了强劲的性能；</p></li><li><p>便捷性能扩容，只需要水平增加服务器资源性能就能提升；</p></li><li><p>负载均衡健康检查</p></li><li><p>Cloud-Native：与平台无关，Kong可以在任何平台上运行-从裸机到容器-并且可以在本机上的每个云上运行。</p></li><li><p>Kubernetes-Native：使用官方的Ingress Controller通过本地Kubernetes CRD声明性地配置Kong，以路由和连接所有L4 + L7通信。</p></li><li><p>动态负载平衡：跨多个上游服务对流量进行负载平衡。</p></li><li><p>基于哈希的负载平衡：具有一致的哈希/粘性会话的负载平衡。</p></li><li><p>熔断器：智能跟踪不健康的上游服务。</p></li><li><p>运行状况检查：主动和被动监视您的上游服务。</p></li><li><p>服务发现：在第三方DNS解析器（例如Consul）中解析SRV记录。</p></li><li><p>无服务器：直接从Kong调用和保护AWS Lambda或OpenWhisk功能。</p></li><li><p>WebSockets：通过WebSockets与您的上游服务进行通信。</p></li><li><p>gRPC：与gRPC服务进行通信，并通过日志记录和可观察性插件观察流量</p></li><li><p>OAuth2.0：轻松将OAuth2.0身份验证添加到您的API。</p></li><li><p>日志记录：通过HTTP，TCP，UDP或磁盘记录对系统的请求和响应。</p></li><li><p>安全性：ACL，僵尸程序检测，允许/拒绝IP等…</p></li><li><p>Syslog：登录到系统日志。</p></li>",19),S={href:"https://cloud.tencent.com/product/ssl?from=20065&from_column=20065",target:"_blank",rel:"noopener noreferrer"},O=t("<li><p>监视：实时监视提供关键的负载和性能服务器指标。</p></li><li><p>转发代理：使Kong连接到中间透明HTTP代理。</p></li><li><p>认证：HMAC，JWT，基本等。</p></li><li><p>速率限制：基于许多变量来阻止和限制请求。</p></li><li><p>转换：添加，删除或处理HTTP请求和响应。</p></li><li><p>缓存：在代理层缓存并提供响应。</p></li><li><p>CLI：从命令行控制Kong群集。</p></li>",7),K={href:"https://cloud.tencent.com/product/slshttp?from=20065&from_column=20065",target:"_blank",rel:"noopener noreferrer"},N=a("li",null,[a("p",null,"地理复制：跨不同区域的配置始终是最新的。")],-1),P=a("li",null,[a("p",null,"故障检测和恢复：如果您的Cassandra节点之一发生故障，则Kong不会受到影响。")],-1),x=a("li",null,[a("p",null,"集群：所有Kong节点自动加入集群，并在各个节点之间更新其配置。")],-1),T=a("li",null,[a("p",null,"可扩展性：Kon本质上是分布式的，只需添加节点即可水平扩展。")],-1),B=a("li",null,[a("p",null,"性能：Kong通过扩展和使用NGINX作为核心轻松处理负载。")],-1),C=a("li",null,[a("p",null,"插件：可扩展的体系结构，用于向Kong和API添加功能。")],-1),G=t('<figure><img src="https://ask.qcloudimg.com/http-save/yehe-2680217/96ab8b6804809563de779bc759f8f6c3.png?imageView2/2/w/2560/h/7000" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><ul><li><p>Kong 提供了 Http/Rest 的接口来实现配置 ，使得其可以更简单的构建图形化界面进行动态配置。</p></li><li><p>OpenResty 是一个基于 Nginx 的库，它将 Nginx 进行封装，并提供了整个生命周期的 Hook（ 钩子 ），使得开发者可以通过 Lua 脚本对 Nginx 进行插件化管理。</p></li><li><p>Kong 使用PostgreSQL 或 Cassandra 来对其配置文件进行持久化存储，使得可以进行集群管理。</p></li><li><p>Kong 提供了插件模型，使用 Lua 脚本来对 Nginx 整个生命周期进行扩展。实现了一些常用插件（ 限流、熔断、验权等 ）。</p></li></ul><p>网关架构：</p><ol><li>RESTful API</li><li>插件层</li><li>集群、数据存储</li><li>OpenResty</li><li>Nginx</li></ol><h2 id="docker-安装-kong" tabindex="-1"><a class="header-anchor" href="#docker-安装-kong" aria-hidden="true">#</a> Docker 安装 Kong</h2>',5),R={class:"hint-container info"},D=a("p",{class:"hint-container-title"},"参考文章",-1),I={href:"https://blog.csdn.net/qq_16174727/article/details/122614066",target:"_blank",rel:"noopener noreferrer"},y=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 创建网络</span>
<span class="token function">docker</span> network create kong-net

<span class="token comment"># 启动 PostgreSQL</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kong-database <span class="token punctuation">\\</span>
 <span class="token parameter variable">--network</span><span class="token operator">=</span>kong-net <span class="token punctuation">\\</span>
 <span class="token parameter variable">-v</span> /opt/pgdata:/var/lib/postgresql/data <span class="token punctuation">\\</span>
 <span class="token parameter variable">-p</span> <span class="token number">5432</span>:5432 <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;POSTGRES_USER=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;POSTGRES_DB=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;POSTGRES_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">--restart</span> always <span class="token punctuation">\\</span>
 postgres:9.6
 
 
 <span class="token comment"># 准备 Kong 数据库</span>
 <span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">--network</span><span class="token operator">=</span>kong-net <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_DATABASE=postgres&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_HOST=kong-database&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_USER=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot;</span> <span class="token punctuation">\\</span>
 kong:3.1.0 kong migrations bootstrap


<span class="token comment"># 启动 Kong</span>
 <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kong <span class="token punctuation">\\</span>
 <span class="token parameter variable">--network</span><span class="token operator">=</span>kong-net <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_DATABASE=postgres&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_HOST=kong-database&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_USER=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PROXY_ACCESS_LOG=/dev/stdout&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_ADMIN_ACCESS_LOG=/dev/stdout&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PROXY_ERROR_LOG=/dev/stderr&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_ADMIN_ERROR_LOG=/dev/stderr&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-p</span> <span class="token number">8000</span>:8000 <span class="token punctuation">\\</span>
 <span class="token parameter variable">-p</span> <span class="token number">8443</span>:8443 <span class="token punctuation">\\</span>
 <span class="token parameter variable">-p</span> <span class="token number">8001</span>:8001 <span class="token punctuation">\\</span>
 <span class="token parameter variable">-p</span> <span class="token number">8444</span>:8444 <span class="token punctuation">\\</span>
 <span class="token parameter variable">--restart</span> always <span class="token punctuation">\\</span>
 kong:3.1.0
 
 
 <span class="token comment"># 启动 KongA</span>
  <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">1337</span>:1337 <span class="token punctuation">\\</span>
 <span class="token parameter variable">--network</span><span class="token operator">=</span>kong-net <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_DATABASE=postgres&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_HOST=kong-database&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_USER=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_PG_PASSWORD=kong&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;DB_DATABASE=konga_db&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;KONGA_HOOK_TIMEOUT=120000&quot;</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">--name</span> konga <span class="token punctuation">\\</span>
 pantsel/konga

     
<span class="token comment"># 创建一个临时目录</span>
<span class="token function">mkdir</span> dockertmp
<span class="token builtin class-name">cd</span> dockertmp

<span class="token comment"># 查找konga的容器 id</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>     
<span class="token comment"># 停止正在运行的容器</span>
<span class="token function">docker</span> stop <span class="token operator">&lt;</span>konga容器id<span class="token operator">&gt;</span>
<span class="token comment"># 将容器的文件复制到本地</span>
<span class="token function">docker</span> <span class="token function">cp</span> <span class="token operator">&lt;</span>konga容器id<span class="token operator">&gt;</span>:/app/assets ./            
 
<span class="token comment"># 拉取语言插件镜像</span>
<span class="token function">docker</span> pull jsonljd/konga-lang-plugin:latest
 
<span class="token comment"># 拉取镜像，需要设置逻辑目录</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> konga-lang-plugin <span class="token punctuation">\\</span>
 <span class="token parameter variable">-v</span> ./assets:/app/assets <span class="token punctuation">\\</span>
 jsonljd/konga-lang-plugin                       
 
<span class="token comment"># 覆盖</span>
<span class="token function">docker</span> <span class="token function">cp</span> ./assets <span class="token operator">&lt;</span>konga容器id<span class="token operator">&gt;</span>:/app
<span class="token comment"># 启动容器</span>
<span class="token function">docker</span> start <span class="token operator">&lt;</span>konga容器id<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="简单使用" tabindex="-1"><a class="header-anchor" href="#简单使用" aria-hidden="true">#</a> 简单使用</h2><blockquote><p>服务管理和路由管理</p></blockquote><p>管理服务：</p><p>添加一个服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/services <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>example_service <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&#39;http://mockbin.org&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看服务的状态：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># /services/{service name or id}</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> GET http://localhost:8001/services/example_service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>更新服务的配置，比如将服务的请求重试次数从 5 改到 6：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">--request</span> PATCH <span class="token punctuation">\\</span>
  <span class="token parameter variable">--url</span> localhost:8001/services/example_service <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">retries</span><span class="token operator">=</span><span class="token number">6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看所有的服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> GET http://localhost:8001/services
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>管理路由：</p><p>创建路由：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/services/example_service/routes <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token string">&#39;paths[]=/mock&#39;</span> <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>example_route
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看服务的路由：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># /services/{service name or id}/routes/{route name or id}</span>
<span class="token comment"># /routes/{route name or id}</span>
<span class="token function">curl</span> <span class="token parameter variable">-X</span> GET http://localhost:8001/services/example_service/routes/example_route
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新路由信息：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">--request</span> PATCH <span class="token punctuation">\\</span>
  <span class="token parameter variable">--url</span> localhost:8001/services/example_service/routes/example_route <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">tags</span><span class="token operator">=</span><span class="token string">&quot;tutorial&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看所有路由：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:8001/routes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="限流插件" tabindex="-1"><a class="header-anchor" href="#限流插件" aria-hidden="true">#</a> 限流插件</h2><p>限流，每分钟五次</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/plugins <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>rate-limiting <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">config.minute</span><span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">config.policy</span><span class="token operator">=</span>local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>验证五次过后就限制：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">_</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">curl</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-i</span> localhost:8000/mock/request<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span><span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>服务水平的限流：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/services/example_service/plugins <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token string">&quot;name=rate-limiting&quot;</span> <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token assign-left variable">config.minute</span><span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token assign-left variable">config.policy</span><span class="token operator">=</span>local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>路由水平的限流：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/routes/example_route/plugins <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token string">&quot;name=rate-limiting&quot;</span> <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token assign-left variable">config.minute</span><span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token assign-left variable">config.policy</span><span class="token operator">=</span>local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>消费者水平的限流：</p>`,31),L={href:"https://docs.konghq.com/gateway/latest/admin-api/#consumer-object",target:"_blank",rel:"noopener noreferrer"},w=t(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/consumers/ <span class="token punctuation">\\</span>
  <span class="token parameter variable">--data</span> <span class="token assign-left variable">username</span><span class="token operator">=</span>jsmith
  
<span class="token function">curl</span> <span class="token parameter variable">-X</span> POST http://localhost:8001/plugins <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token string">&quot;name=rate-limiting&quot;</span> <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token string">&quot;consumer.username=jsmith&quot;</span> <span class="token punctuation">\\</span>
   <span class="token parameter variable">--data</span> <span class="token string">&quot;config.second=5&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function F(H,X){const s=o("ExternalLinkIcon");return p(),i("div",null,[c,a("blockquote",null,[a("p",null,[a("a",u,[n("Kong API 练习"),e(s)]),n("（需要科学上网）")]),a("p",null,[a("a",d,[n("Kong 官方文档"),e(s)])])]),a("div",v,[k,a("p",null,[a("a",m,[n("网关神器Kong（一）：介绍"),e(s)])]),a("p",null,[a("a",b,[n("网关服务Kong和konga介绍安装使用教程"),e(s)])]),a("p",null,[a("a",g,[n("KONG网关 — 介绍安装"),e(s)])]),a("p",null,[a("a",h,[n("使用Kong作为微服务网关"),e(s)])])]),_,f,E,A,a("ul",null,[q,a("li",null,[a("p",null,[n("SSL：为基础服务或API设置特定的"),a("a",S,[n("SSL证书"),e(s)]),n("。")])]),O,a("li",null,[a("p",null,[n("REST API：Kong可以使用其"),a("a",K,[n("RESTful API"),e(s)]),n("进行操作，以实现最大的灵活性。")])]),N,P,x,T,B,C]),G,a("div",R,[D,a("p",null,[a("a",I,[n("kong/kongA docker部署+汉化"),e(s)])])]),y,a("blockquote",null,[a("p",null,[n("Consumers are created using the "),a("a",L,[n("consumer object"),e(s)]),n(" in the Admin API.")])]),w])}const j=l(r,[["render",F],["__file","C-服务网关-Kong.html.vue"]]);export{j as default};
